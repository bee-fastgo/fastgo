<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bee.team.fastgo.mapper.ProjectDoMapperExt">

    <!--查询后台项目列表-->
    <select id="findBackPorjectList" parameterType="map" resultType="com.bee.team.fastgo.vo.project.ProjectListVo">
        select projectName,projectDesc,gitUrl,projectStatus,packageName from t_project where projectType = '2'
        limit #{start},#{limit}
    </select>

    <!--查询前台项目列表-->
    <select id="findFrontPorjectList" parameterType="map" resultType="com.bee.team.fastgo.vo.project.ProjectListVo">
        select projectName,projectDesc,gitUrl,projectStatus,packageName from t_project where projectType = '1'
        limit #{start},#{limit}
    </select>

    <select id="queryProjectInfo" parameterType="map" resultType="com.bee.team.fastgo.model.ProjectDo">
        select * from t_project p
        <if test="type!=null and type=1">
            inner join t_project_profile pp on p.projectCode = pp.projectCode
            inner join t_profile_runprofile_relation pr on pr.prifileCode = pp.prifileCode
            where pr.runProfileCode = #{code}
        </if>
        <if test="type!=null and type=2">
            inner join t_project_profile pp on p.projectCode = pp.projectCode
            inner join t_profile_software_relation ps on ps.prifileCode = pp.prifileCode
            where ps.softwareCode = #{code}
        </if>
    </select>

</mapper>